<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>4.4 Get user dad</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>4.4 Get user dad</h1><br/><p></p><p>1. Enumerate the connections on the system.</p><p>    <div class="codebox"><pre>mum@family<span style="color:#a52a2a;font-weight:700">:/</span>$ ss -ntlup</pre></div></p><p>    </p><p>    <span style="color:#ffa500;">Output:</span>   </p><p>    <img src="images/1127-1.png" alt="images/1127-1.png" /></p><p></p><p></p><p><strong>SSH Port forwarding</strong></p><p><span style="indent:1;">Start port forwarding over an *existing* SSH connection instead of creating a new one.</span></p><p><span style="indent:1;"></span></p><p><span style="indent:1;">This tip is for when you have an existing SSH session running but forgot to start port forwarding over the connection. Typically, people would close the connection and create a new one. However there is an alternative.</span></p><p><span style="indent:1;"></span></p><p><span style="indent:1;">On your existing connection, simply type &lt;enter&gt;~C to bring up a console with your local SSH client (not the server). The provided console accepts a few of the ssh commands options, including -R, -L.</span></p><p><span style="indent:1;"></span></p><p><span style="indent:1;">So, for example, if I wanted to suddenly access some service running on port 4321 on my local machine from the server, I could type &lt;enter&gt;~C-R 1234:localhost:4321&lt;enter&gt; and I would immediately have access to that resource from the server on localhost:4321 (that&#39;s the server&#39;s localhost).</span></p><p><span style="indent:1;"></span></p><p><span style="indent:1;"></span><strong><span style="indent:1;">~ (tilde)</span></strong><span style="indent:1;"> is the SSH&#39;s default EscapeChar. You press &lt;enter&gt; first to clear the buffer, the ~ escape char and any one of a number of options.</span></p><p><span style="indent:1;"></span></p><p><span style="indent:1;">For example, the full list of options that the client of my version of OpenSSH supports is (gotten with &lt;enter&gt;~?):</span></p><p><span style="indent:1;"></span></p><p><span style="indent:1;">Supported escape sequences:</span></p><p><span style="indent:1;">  ~.   - terminate connection (and any multiplexed sessions)</span></p><p><span style="indent:1;">  ~B  - send a BREAK to the remote system</span></p><p><span style="indent:1;">  ~C  - open a command line</span></p><p><span style="indent:1;">  ~R  - Request rekey (SSH protocol 2 only)</span></p><p><span style="indent:1;">  ~^Z - suspend ssh</span></p><p><span style="indent:1;">  ~#  - list forwarded connections</span></p><p><span style="indent:1;">  ~&amp;  - background ssh (when waiting for connections to terminate)</span></p><p><span style="indent:1;">  ~?  - this message</span></p><p><span style="indent:1;">  ~~  - send the escape character by typing it twice</span></p><p>  </p><p><small>From: </small><a href="https://coderwall.com/p/5wp2wg/start-port-forwarding-over-an-existing-ssh-connection-instead-of-creating-a-new-one">https://coderwall.com/p/5wp2wg/start-port-forwarding-over-an-existing-ssh-connection-instead-of-creating-a-new-one</a></p><p></p><p>1. Run the following command on the victim&#39;s shell.</p><p>    <div class="codebox"><pre>mum@family<span style="color:#a52a2a;font-weight:700">:/</span>home<span style="color:#a52a2a;font-weight:700">/</span>dad<span style="color:#a52a2a;font-weight:700">/</span>survey$ &lt;~+C&gt;<br /></pre></div></p><p></p><p>    <span style="color:#ffa500;">Output:</span>   </p><p>    <img src="images/1127-2.png" alt="images/1127-2.png" /></p><p></p><p>2. When you get the “ssh&gt;” prompt add the following code.</p><p>    <div class="codebox"><pre> -L 8000<span style="color:#a52a2a;font-weight:700">:</span>localhost<span style="color:#a52a2a;font-weight:700">:</span>8000</pre></div></p><p></p><p>    <span style="color:#ffa500;">Output:</span>     </p><p>    <img src="images/1127-3.png" alt="images/1127-3.png" /></p><p>    </p><p><strong><span style="indent:1;">Note</span></strong></p><p><em><span style="indent:1;">If you get “bind [::1]:8000: Address already in use</span></em><em> channel_setup_fwd_listener_tcpip: cannot listen to port: 8000 Port forwarding failed.” you must run on your Kali Machine the following command.</em></p><p><em></em></p><p><em></em><div class="codebox"><pre>$ lsof -i <span style="color:#a52a2a;font-weight:700">:</span>8000</pre></div></p><p></p><p><span style="indent:1;">You&#39;ll see the proccess running on the port 8000. Kill the proccess.</span></p><p></p><p>3. Navigate to http://localhost:8000.</p><p>    <img src="images/1127-4.png" alt="images/1127-4.png" /></p><p></p><p>    </p><p></p><p>   </p><p></p><p align="center"><img src="images/home.svg" height="22" width="22">  <a href="index.html">Index</a></p></div>
</body>
</html>
