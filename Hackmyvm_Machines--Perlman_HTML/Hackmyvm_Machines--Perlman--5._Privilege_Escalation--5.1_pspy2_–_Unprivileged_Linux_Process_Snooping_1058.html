<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>5.1 pspy2 – Unprivileged Linux Process Snooping</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>5.1 pspy2 – Unprivileged Linux Process Snooping</h1><br/><p></p><p>“pspy” is a command line tool designed to snoop on processes without need for root permissions. It allows you to see commands run by other users, cron jobs, etc. as they execute. Great for enumeration of Linux systems in CTFs. Also great to demonstrate your colleagues why passing secrets as arguments on the command line is a bad idea. More info <a href="https://www.jesusninoc.com/06/27/pspy-unprivileged-linux-process-snooping/">here</a>.</p><p></p><p>1. Download “pspy32” from <a href="https://github.com/DominicBreuker/pspy/releases/download/v1.0.0/pspy32">here</a>.</p><p></p><p>2. Upload the file from the Kali Machine to “/tmp”.</p><p></p><p>	<div class="codebox"><pre>$ scp -i rita ~/Downloads/pspy32 rita@perlman.hmv:/tmp<br /></pre></div></p><p></p><p>3. Go to SSH connection shell.</p><p><span style="background-color:#000000;"></span></p><p><span style="background-color:#000000;"></span>4. Change “pspy32” privileges.<span style="background-color:#000000;"></span></p><p><span style="background-color:#000000;"></span></p><p><span style="background-color:#000000;"></span>	<div class="codebox"><pre>rita@perlman:~$ cd /tmp<br />rita@perlman:~$ chmod +x pspy32</pre></div><span style="background-color:#000000;"></span></p><p><span style="background-color:#000000;"></span></p><p><span style="background-color:#000000;"></span>5. Run the script.<span style="background-color:#000000;"></span></p><p><span style="background-color:#000000;"></span></p><p><span style="background-color:#000000;"></span>	<div class="codebox"><pre>./pspy32</pre></div><span style="background-color:#000000;"></span></p><p><span style="background-color:#000000;"></span></p><p><span style="background-color:#000000;"></span>	<span style="color:#ffa500;">Output:</span><span style="background-color:#000000;"></span></p><p><span style="background-color:#000000;"></span>	<img src="images/1058-1.png" alt="images/1058-1.png" /></p><p></p><p>    After executing the script, we found a python script “clean.sh” which owner is “milou” user.</p><p>    </p><p>6. Look at the &quot;home/milou/clean.sh&quot; file.On the SSH connection run the following commands.</p><p>    <div class="codebox"><pre>rita@perlman:$ cd /home/milou<br />rita@perlman:/home/milou$ ls -l<br />rita@perlman:/home/milou$ cat clean.sh</pre></div></p><p>  	<span style="color:#ffa500;">Output:</span></p><p>    <img src="images/1058-2.png" alt="images/1058-2.png" /></p><p>    <img src="images/1058-3.png" alt="images/1058-3.png" /></p><p>    </p><p>    You can see you can run the file because you don&#39;t have permissions.</p><p>    </p><p>7. Run the followng commands.</p><p>    <div class="codebox"><pre>rita@perlman:/home/milou$ ls -al<br />rita@perlman:/home/milou$ cat .profile</pre></div></p><p></p><p>  	<span style="color:#ffa500;">Output:</span></p><p>    <img src="images/1058-4.png" alt="images/1058-4.png" /></p><p>    </p><p>    There&#39;s “.profile” file.</p><p>    </p><p>    <img src="images/1058-5.png" alt="images/1058-5.png" /><span style="background-color:#000000;"></span></p><p><span style="background-color:#000000;"></span></p><p><span style="background-color:#000000;"></span></p><p><span style="background-color:#000000;"></span></p><p><span style="background-color:#000000;"></span></p><p align="center"><img src="images/home.svg" height="22" width="22">  <a href="index.html">Index</a></p></div>
</body>
</html>
